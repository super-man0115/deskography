<div class="h-full w-full flex justify-center items-center">
  <div class="rounded overflow-hidden border w-full lg:w-6/12 md:w-6/12 bg-white mx-3 md:mx-0 lg:mx-0">
    <div class="w-full flex justify-between p-3">
      <div class="flex">
        <div class="rounded-full h-8 w-8 bg-gray-500 flex items-center justify-center overflow-hidden">
          <%= link_to image_tag(@post.user.decorate.avatar.variant( resize: "100x100^", gravity: "center", crop: "100x100+0+0" )), user_path(@post.user), class: 'rounded-circle avatar-sm' %>
        </div>
        <span class='pt-1 ml-2 font-bold text-sm'><%= link_to @post.user.user_name, user_path(@post.user) %></span>
      </div>
      <div class="relative inline-block text-left" data-controller="dropdown">
        <span class="px-2 hover:bg-gray-300 cursor-pointer rounded" data-action="click->dropdown#toggleMenu">
          <i class="fas fa-ellipsis-h pt-2 text-lg"></i>
        </span>
        <div class="hidden mt-2 origin-top-right absolute right-0 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10" data-dropdown-target="menu">
          <div class="py-1" role="menu" aria-orientation="vertical">
            <%= link_to "編集", edit_post_path(@post), class: "block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" %>
            <%= link_to "削除", post_path(@post), class: "block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100", data: { turbo_method: :delete, turbo_confirm: '削除しますか？' } %>
          </div>
        </div>
      </div>
    </div>
    <div data-controller="image-slider" class="carousel w-full">
      <% @post.images.each.with_index do |image, index| %>
        <div id="slide<%= index + 1 %>" class="carousel-item relative w-full" data-image-slider-target="slide" style="display: <%= index == 0 ? 'block' : 'none' %>">
          <%= image_tag(image.blob.variant(resize_to_fill: [1000, 600])) %>
          <div class="absolute flex justify-between transform -translate-y-1/2 left-5 right-5 top-1/2">
            <%= link_to "❮", "#slide#{(index - 1 + @post.images.size) % @post.images.size + 1}", class: "btn btn-circle left-arrow", data: { action: "image-slider#previousSlide", image_slider_target: "arrow" } %>
            <%= link_to "❯", "#slide#{(index + 1) % @post.images.size + 1}", class: "btn btn-circle right-arrow", data: { action: "image-slider#nextSlide", image_slider_target: "arrow" } %>
          </div>
        </div>
      <% end %>
    </div>
    <div class="px-3 pb-2">
      <div class="pt-2">
        <span class="text text-gray-400 font-medium"><%= @post.age_group_i18n + @post.business_attribute_i18n %></span>
      </div>
      <div class="pt-1">
        <% @post.tags.each do |tag| %>
          <%= link_to tag.name, '#', class: 'inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800' %>
        <% end %>
        <div class="mb-2 text-sm">
          <div>
            <%= @post.description %>
          </div>
        </div>
      </div>
        <%= render 'posts/bookmark_button', post: @post  %>
      <div class="flex justify-center">
        <%= render 'comments/form', { post: @post, comment: @comment } %>
      </div>
      <br/>
      <br/>
      <div class="flex justify-center">
        <%= render 'comments/comments', { comments: @comments } %>
      </div>
    </div>
  </div>
</div>
